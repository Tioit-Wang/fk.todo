1. 左右布局与导航（今日/重要 + 项目列表 + 右侧视图切换）
需求详细描述：
- 主窗口改为左右布局：左侧为「导航栏」，右侧为「内容区」。
- 左侧导航固定项：`今日`、`重要`。
- 左侧导航项目区：展示所有项目（Project），支持按“置顶优先 + 自定义排序”显示。
- 右侧内容区：对当前左侧选中的“范围”（今日/重要/某项目），支持视图切换：
  - `清单`（列表/现有能力的延伸）
    - 顶部分组：`全部` / `未完成` / `已完成`
    - 任务排序：重要(important)永远置顶；其余按当前排序模式
    - 顶部工具条：仅保留 `搜索` + `排序(点击循环切换)` + `批量`
  - `日历`（月/周/日）
  - `统计`（复盘面板）
- 交互约定：
  - 左侧切换范围不丢失右侧当前视图（例如在日历视图下切换项目，仍保持日历视图）。
  - 右侧切换视图不改变左侧范围（例如从清单切到日历，只是改变展示方式）。
验收标准：
- 左侧固定项与项目区布局稳定；窗口缩放/不同分辨率下不溢出；右侧内容区能在 3 个视图间切换并正确响应范围。
------------------------

2. 项目（Project）基础能力：新建、修改、排序、置顶
需求详细描述：
- Project 字段（建议）：`id`、`name`、`pinned`、`sort_order`、`created_at`、`updated_at`。
- 支持在 UI 新建项目、修改项目名称。
- 支持项目排序（拖拽或上下移动均可），并持久化 `sort_order`。
- 支持项目置顶/取消置顶（pinned），置顶项目永远排在非置顶之前，组内再按 `sort_order`。
- 系统默认项目：`收集箱(inbox)`（建议：默认置顶、不可删除，仅可重命名/不可重命名二选一）。
验收标准：
- 项目 CRUD/排序/置顶在重启后保持一致；老数据升级后自动出现收集箱；任何任务都能有归属项目。
------------------------

3. 任务与项目联动（Task.project_id）
需求详细描述：
- Task 增加字段：`project_id`（老数据迁移：写入默认 `inbox`）。
- 创建任务：
  - 在某项目范围内创建：默认 `project_id = 当前项目`。
  - 在「今日/重要」范围内创建：默认 `project_id = inbox`（或用户上次选择的项目，需明确规则）。
- 编辑任务：支持修改所属项目（移动到其他项目）。
- 批量操作：支持批量移动任务到某项目（与现有批量完成/删除并列）。
- 筛选/搜索：在项目范围内仅展示该项目任务；「今日/重要」为智能范围（跨项目聚合）。
验收标准：
- 项目范围内任务列表与日历/统计一致；移动项目后各视图立即反映；批量移动可用且不破坏排序/提醒等字段。
------------------------

4. 日历体系入口：月/周/日视图与导航条
需求详细描述：
- 右侧「日历」视图下提供二级切换：`月` / `周` / `日`。
- 日历视图统一导航条：
  - 上/下一段（上月/下月、上周/下周、上一日/下一日）
  - 返回今天（Today）
  - 显示当前范围标题（YYYY-MM / YYYY-WW / YYYY-MM-DD）
- 日历展示范围遵循左侧选择：
  - 今日：仅展示“今天（可选：含逾期）”相关任务在日历中的落点与列表。
  - 重要：仅展示 important=true 的任务。
  - 项目：仅展示该 project_id 的任务。
验收标准：
- 月/周/日切换与导航条行为一致；不同范围下日历展示过滤正确；不会出现“视图切换丢状态/跳回”的体验问题。
------------------------

5. 月视图（整月规划 + 回顾复盘）
需求详细描述：
- 月视图为 6x7 网格，清晰标注当月/非当月日期、今天高亮。
- 每天展示任务密度提示（至少：任务数；可选：重要/逾期角标）。
- 点击某天：右侧（或下方）展示该天任务清单（按时间排序）。
- 快速新建：
  - 在某天点击“+”或空白处可新建任务，默认 `due_at` 落在该天（时间按“默认时间规则/用户上次选择”）。
- 可选增强：拖拽任务到其他日期，保持时间不变，仅改日期部分。
验收标准：
- 能一眼看出整月忙闲分布；选中日期的任务列表与清单视图一致；快速新建会落到正确日期。
------------------------

6. 周视图（更具体的一周时间轴）
需求详细描述：
- 周视图展示一周 7 列（周一~周日）+ 垂直时间轴（00:00~24:00 或可压缩为工作时段）。
- 任务作为“日程时间点”（仅用 due_at），在对应日期/时间位置显示为卡片或标签。
- 忙闲直观性：
  - 支持在列头/背景用密度提示展示“忙碌/空闲”（例如按小时的热度或简化的计数条）。
- 调整安排：
  - 拖拽上下调整时间（修改 due_at 的时间部分）。
  - 拖拽左右调整日期（修改 due_at 的日期部分）。
- 快速创建：点击某天某时间刻度可直接创建任务（due_at = 该时间点）。
验收标准：
- 能直观看出一周空闲/忙碌；拖拽调整后的 due_at 精确且可回写；无需“持续时长”也能可读可用。
------------------------

7. 日视图（当天时间顺序 + 上下滚动跨日）
需求详细描述：
- 日视图默认聚焦“当天”，按时间顺序展示任务（时间轴/列表均可，建议时间轴+列表融合）。
- 支持上下滚动浏览过去与未来：
  - 以“按天分组”的连续流展示（例如向上加载昨天/前天，向下加载明天/后天）。
  - 保持滚动定位稳定（加载新天不导致视图跳动）。
- 快速跳转：一键回到“今天”。
- 调整安排：支持拖拽/快捷按钮改时间点（修改 due_at）。
验收标准：
- 在日视图能顺畅浏览过去与未来的安排；滚动加载不卡顿且不跳；对任务时间调整能即时生效并在其他视图同步。
------------------------

8. 更强的提醒策略（不设安静时间，提升“必须处理”能力）
需求详细描述：
- 现有提醒类型保留：`none / normal / forced`，并增强“未处理持续提醒”能力。
- 提醒 v1（推荐最有体感的组合）：
  - 重复提醒：到点触发后，若任务仍未完成，则按间隔继续提醒（例如每 5/10/30 分钟）。
  - 次数限制：可配置最多提醒 N 次；或“直到完成”（二选一或同时支持）。
  - 更丰富的稍后：除“5 分钟”外，增加 15 分钟、1 小时、明天早上等快捷项（可在设置里配置默认按钮）。
  - 逾期追踪：任务逾期后仍可按策略继续提醒（与重复提醒共用一套策略即可）。
- 调度器改造要点：
  - 从“单次触发 + last_fired_at 去重”升级为“可计算下一次触发点”的状态机（避免重复弹窗/重复通知）。
  - 强制提醒继续通过窗口叠加层展示；普通提醒继续走系统通知，并支持通知动作（完成/稍后）。
验收标准：
- 重要任务可以做到“持续提醒直到处理”（或达到次数上限）；不会出现同一提醒狂刷/重复触发；稍后选项覆盖常用场景。
------------------------

9. 统计与复盘（周/月/日 + 项目维度）
需求详细描述：
- 在右侧新增「统计」视图，按左侧范围聚合统计：
  - 全局（通过选择某项目/重要/今日范围切换）
  - 项目维度：每个项目的完成/逾期等汇总
- 指标（v1，不依赖新增复杂数据即可落地）：
  - 日/周/月：创建数、到期数、完成数、完成率
  - 逾期：逾期任务数、平均逾期时长（完成时 vs due_at）
  - 重要：重要任务完成数/占比
  - 日历热力：月度每天任务量/完成量（用于回顾复盘）
- 指标（v2，可选，需要配合提醒策略写入更多行为数据）：
  - 提醒触发次数、稍后次数、从首次提醒到完成的响应时间分布
验收标准：
- 用户能在统计页完成“月/周复盘”并得到可解释的趋势；同一范围在清单/日历/统计之间数据口径一致。
------------------------

10. UI 清爽化与一致性（布局、密度、动效、空状态）
需求详细描述：
- 统一视觉层级：主按钮/次按钮/危险按钮、文字层级、间距系统、卡片密度与分隔线风格。
- 导航栏（左侧）与内容区（右侧）风格统一，减少“按钮堆叠”和信息噪声。
- 空状态与引导：今日/重要/项目为空时给出清晰引导（例如“去创建任务/去创建项目/去日历规划”）。
- 交互细节：切换视图动效轻量（淡入/滑动），避免眩晕；加载与保存状态有明确反馈。
验收标准：
- 同屏信息更清晰、操作路径更短；新用户能在 30 秒内理解“左选范围、右选视图”的核心交互。
------------------------

11. 数据结构与兼容（schema 升级、导出/备份覆盖项目）
需求详细描述：
- 数据文件升级：
  - `TasksFile` 增加 `projects`；`Task` 增加 `project_id`。
  - 老数据迁移：所有历史任务自动归入 `inbox`；若缺字段，前后端均需默认值保证不崩。
- 导出（JSON/CSV/Markdown）升级：导出内容需包含项目数据与 project_id，保证“导出-导入/备份-恢复”后结构一致。
- 备份/恢复/导入保持兼容：恢复后 UI 侧项目列表正确、任务归属正确、提醒状态不丢失。
验收标准：
- 任意旧数据文件都能升级打开；导出后再导入/恢复能得到一致的数据结构与 UI 展示。
------------------------

12. 验收清单（里程碑建议）
需求详细描述：
- M1（导航+项目）：左右布局落地；项目新建/修改/排序/置顶；任务 project_id 全链路打通。
- M2（日历三视图）：月视图完善；周视图可看忙闲且可拖拽改期改时；日视图支持跨日滚动浏览。
- M3（提醒+统计）：重复提醒+更多稍后落地；统计页提供周/月复盘与项目维度汇总。
- M4（体验收尾）：视觉与交互一致性提升；空状态/动效/细节打磨；回归测试通过。
验收标准：
- 按里程碑逐项可验收；主流程“记录→安排→提醒→完成→复盘”闭环可用。
------------------------
